\documentclass[14pt,a1paper,landscape]{tikzposter}

%% Tikzposter is highly customizable: please see
%% https://bitbucket.org/surmann/tikzposter/downloads/styleguide.pdf

%% Available themes: see also
%% https://bitbucket.org/surmann/tikzposter/downloads/themes.pdf
% \usetheme{Default}
% \usetheme{Rays}
% \usetheme{Basic}
% \usetheme{Simple}
 \usetheme{Envelope}
% \usetheme{Wave}
% \usetheme{Board}
% \usetheme{Autumn}
% \usetheme{Desert}

%% Further changes to the title etc is possible
% \usetitlestyle{Default}
% \usetitlestyle{Basic}
 \usetitlestyle{Empty}
% \usetitlestyle{Filled}
% \usetitlestyle{Envelope}
% \usetitlestyle{Wave}
% \usetitlestyle{verticalShading}


%\usepackage{fontspec}
%\setmainfont{FreeSerif}
%\setsansfont{FreeSans}
\usetikzlibrary{positioning}
\usepackage [sfdefault]{cabin}
\usepackage[T1]{fontenc}
\usepackage{natbib}
\usepackage{wrapfig}

\author{Eric Rexstad, David L. Miller, Laura Marshall and Len Thomas}
\title{\parbox{0.6\linewidth}{\centering Migrating distance sampling projects from Distance for Windows to the Distance R package}}
\institute{Centre for Research into Ecological and Environmental Modelling University of St Andrews}


% borrowed from https://tex.stackexchange.com/questions/185166/tikzposter-4-logos-title-2-at-each-side/185278#185278

%\makeatletter
%\def\TP@titlegraphictotitledistance{-4cm}
%\settitle{ \centering \vbox{
%		\@titlegraphic \\ [\TP@titlegraphictotitledistance] 
%		\centering
%		\color{titlefgcolor} {\bfseries \Huge \sc \@title \par}
%		\vspace*{1em}
%		{\huge \@author \par} \vspace*{1em} {\LARGE \@institute}
%}}
%\makeatother

%\setlength{\columnsep}{2cm}
%
%\title{\parbox{0.5\linewidth}{\centering My  really  really  really  really  really  really  really  really  long poster TITLE.}}
%\author{Name}
%\titlegraphic{
%	\includegraphics[width=8cm, height=4cm]{ISEC_Logo.png}
%	\hfill 
%%	\includegraphics[width=9cm,height=8cm]{distancelogo.png}
%	\\% \vspace{5pt} \\
%	\includegraphics[width=3cm, height=6cm]{02-foundation-vertical-white.png}
%	\hfill 
%	\includegraphics[width=10.5cm,height=3cm]{CREEM_Logo_trans.png}
%}


%% Original, functional way to place single logo in middle
%\titlegraphic{\includegraphics[width=7cm]{ISEC_Logo.png}}
%% Uncomment to switch off tikzposter footer
\tikzposterlatexaffectionproofoff

%%%%%%%%%%%%%%%  Yet another multi-logo title solution from THIS WORKS after adding \usetikzlibrary{positioning}
% https://tex.stackexchange.com/questions/263563/add-logos-beyond-the-title-tikzposter

\makeatletter
\newcommand\insertlogoi[2][]{\def\@insertlogoi{\includegraphics[#1]{#2}}}
\newcommand\insertlogoii[2][]{\def\@insertlogoii{\includegraphics[#1]{#2}}}
\newcommand\insertlogoiii[2][]{\def\@insertlogoiii{\includegraphics[#1]{#2}}}
\newcommand\insertlogoiv[2][]{\def\@insertlogoiv{\includegraphics[#1]{#2}}}
\newlength\LogoHSep
\newlength\LogoVSep

\setlength\LogoHSep{60pt}
\setlength\LogoVSep{1cm}

\insertlogoi[width=7cm]{ISEC_Logo_light_background_RGB.png}
\insertlogoii[width=7cm]{CREEM_Logo_trans.png}
\insertlogoiii[width=6cm]{02-foundation-vertical-white.png}
\insertlogoiv[width=12cm]{distancelogo.png}

\renewcommand\maketitle[1][]{  % #1 keys
	\normalsize
	\setkeys{title}{#1}
	% Title dummy to get title height
	\node[transparent,inner sep=\TP@titleinnersep, line width=\TP@titlelinewidth, anchor=north, minimum width=\TP@visibletextwidth-2\TP@titleinnersep]
	(TP@title) at ($(0, 0.5\textheight-\TP@titletotopverticalspace)$) {\parbox{\TP@titlewidth-2\TP@titleinnersep}{\TP@maketitle}};
	\draw let \p1 = ($(TP@title.north)-(TP@title.south)$) in node {
		\setlength{\TP@titleheight}{\y1}
		\setlength{\titleheight}{\y1}
		\global\TP@titleheight=\TP@titleheight
		\global\titleheight=\titleheight
	};
	
	% Compute title position
	\setlength{\titleposleft}{-0.5\titlewidth}
	\setlength{\titleposright}{\titleposleft+\titlewidth}
	\setlength{\titlepostop}{0.5\textheight-\TP@titletotopverticalspace}
	\setlength{\titleposbottom}{\titlepostop-\titleheight}
	
	% Title style (background)
	\TP@titlestyle
	
	% Title node
	\node[inner sep=\TP@titleinnersep, line width=\TP@titlelinewidth, anchor=north, minimum width=\TP@visibletextwidth-2\TP@titleinnersep]
	at (0,0.5\textheight-\TP@titletotopverticalspace)
	(title)
	{\parbox{\TP@titlewidth-2\TP@titleinnersep}{\TP@maketitle}};
	
	\node[inner sep=0pt,anchor=west]
	at ([shift={(-\LogoHSep,\LogoVSep)}]title.west)
	(logo1)
	{\@insertlogoi};
	
	\node[inner sep=0pt,anchor=west,right=of logo1] 
	(logo2)
	{\@insertlogoii};
	
	\node[inner sep=0pt,anchor=east] 
	at ([shift={(\LogoHSep,\LogoVSep)}]title.east)
	(logo4)
	{\@insertlogoiv};
	
	\node[inner sep=0pt,left=of logo4] 
	(logo4)
	{\@insertlogoiii};
	
	% Settings for blocks
	\normalsize
	\setlength{\TP@blocktop}{\titleposbottom-\TP@titletoblockverticalspace}
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\maketitle

\begin{columns}

\column{0.333}

\block{Introduction}{
The Distance software \citep{thomas_distance_2010} has been downloaded >40,000 times in its 20-year history.  Much of the underlying machinery is written in R.  For some users, there may be benefits to performing the analysis with the underlying R code, rather than working with the graphical user interface (GUI).
	\begin{tikzfigure}[Traditional Distance for Windows interface (left) and distance sampling analysis in R (right).]
%		\includegraphics[width=0.45\columnwidth]{D7-analysis-grab.PNG}
		\includegraphics[width=0.95\linewidth]{merged-grabs.png}
%		\includegraphics[width=0.45\columnwidth]{R-analysis-grab.PNG}
	\end{tikzfigure}

Challenges hindering the transition between analysis with the GUI and analyses in R are two-fold:
\begin{itemize}
	\item Legacy data reside in Distance (GUI) projects, unavailable for importing into R, and
	\item Analyses that are easily described using the GUI may be difficult to specify, particularly if analyst is not proficient in R.
\end{itemize}
}

\note[rotate=8, connection, width = 7cm, % targetoffsety=-2cm,
% roundedcorners=15, targetoffsetx=2cm
]{How to make this transition?}

\block{How to bridge between the two?}{

Distance GUI projects contain essential information necessary to conduct an analysis.  The fundamental purpose of the \texttt{readdst} package is to access this information and place it into R objects for further scrutiny.
 


\begin{wrapfigure}[12]{l}{0.6\linewidth}
	\begin{tikzfigure}
		\includegraphics[width=.85\linewidth]{dst-file-structure.PNG}
	\end{tikzfigure}
	\caption{Database structure of a Distance project.}
\end{wrapfigure}

The elements of a distance sampling analysis are contained inside Distance project files in the form of an Access database.

\begin{enumerate}
	\item Data
	\item model definitions
	\item analysis results
\end{enumerate}

Mining information from tables within the database, via either \texttt{RODBC} (Windows) or \texttt{mdb-tools} (Macs).  Then it is a matter of performing the following three steps.

\begin{itemize}
	\item Trick is to extract contents of (2) and translate into R code
	\item Target the results of previous step to contents of (1) the data
	\item Perhaps contrast results of R analysis with results stored in the Access database
\end{itemize}

}

\column{0.3333}
\block{Applications--Legacy projects}{
\begin{itemize}
\item We try to do this. what?
\item we try to do that.
\end{itemize}
}

\block{Learning structure of R interface}{%
\begin{tikzfigure}[The organisation for which we work]
\includegraphics[width=0.35\linewidth]{CREEM_Logo.jpg}
\end{tikzfigure}
}

\column{0.3333}
\block{Comparative analysis of difficult data}{
\begin{itemize}
\item We try to do this. what?
\item we try to do that.
\end{itemize}
}

\block{Caveats}{
	\texttt{readdst} is not able to translate all GUI analyses into R code.  Current limitations are inability to translate
	\begin{itemize}
		\item analyses using the \texttt{dsm}, \texttt{mads} and \texttt{Dssim} engines,
		\item analyses using post-stratification and
		\item bootstraps for variance estimation.
	\end{itemize}
}

\begin{subcolumns} 
	\subcolumn{.5}  

\block{}{
	
\tikzset{
	font={\fontsize{12pt}{12}\selectfont}}	
% Define block styles
\tikzstyle{decision} = [diamond, draw, fill=blue!20, 
text width=4.5em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20, 
text width=5em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=3cm,
minimum height=2em]

\begin{tikzfigure}[Workflow for converting and analysing Distance project.]
	\centering
	\begin{tikzpicture}[node distance = 4cm, auto]
% Place nodes
\node [block] (init) {initialize model};
\node [cloud, left of=init, node distance=4cm] (expert) {expert};
\node [cloud, right of=init, node distance=4cm] (system) {system};
\node [block, below of=init] (identify) {identify candidate models};
\node [block, below of=identify] (evaluate) {evaluate candidate models};
\node [block, left of=evaluate, node distance=4cm] (update) {update model};
\node [decision, below of=evaluate, node distance=4cm] (decide) {is best candidate better?};
\node [block, below of=decide, node distance=4cm] (stop) {stop};
% Draw edges
\path [line] (init) -- (identify);
\path [line] (identify) -- (evaluate);
\path [line] (evaluate) -- (decide);
\path [line] (decide) -| node [near start] {yes} (update);
\path [line] (update) |- (identify);
\path [line] (decide) -- node {no}(stop);
\path [line,dashed] (expert) -- (init);
\path [line,dashed] (system) -- (init);
\path [line,dashed] (system) |- (evaluate);
\end{tikzpicture}
\end{tikzfigure}
}

\subcolumn{.48} 

\block{Workflow}
{
	A standard use of the package is to convert and dataset and set of analyses from a Distance GUI project and re-run the analyses in R.  This is done using the workflow at left, based around the use of the \texttt{convert\_project()} function in concert with \texttt{run\_analysis()}
} 
\end{subcolumns}

\block{Additional information}{

\coloredbox[]{
\nocite{*} % Insert publications even if they are not cited in the poster
\small{\bibliographystyle{humannat}
	\bibliography{isecposter}\vspace{0.75in}}
}
QR codes to package/website/bioRxiv

}

\end{columns}


\end{document}